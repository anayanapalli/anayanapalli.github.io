---
import { render } from "astro:content"
import MainLayout from "~/layouts/main.astro"
import "~/styles/post.css"
import "~/styles/post.scss"
import { formatDate, getPostsByLocale } from "~/utils"

export async function getStaticPaths() {
  const posts = await getPostsByLocale("en")

  return posts.map((post: any) => ({
    params: { slug: post.id },
    props: { post },
  }))
}

const { post } = Astro.props
const { Content } = await render(post)
---

<MainLayout {...post.data}>
  <article class="prose dark:prose-invert w-full max-w-3xl overflow-hidden">
    <div class="flex flex-col gap-2">
      <h2 class="!my-0 text-3xl font-semibold">
        {post.data.title}
      </h2>

      <div class="my-3 text-gray-500 dark:text-white/80">
        {formatDate(post.data.pubDate)}
      </div>
    </div>

    <div class="my-6">
      <Content />
    </div>

    <div class="mt-12 flex justify-center">
      <div class="h-px w-24 rounded-full bg-black dark:bg-gray-400"></div>
    </div>
  </article>
</MainLayout>
